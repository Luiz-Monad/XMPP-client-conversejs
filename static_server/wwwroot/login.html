<!DOCTYPE html>
<html lang="en">
    <head>
        <title>MzChat</title>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="MzChat" />
        <script src="libsignal-protocol.js"></script>
        <link rel="manifest" href="./manifest.json" />
        <link rel="shortcut icon" type="image/ico" href="favicon.ico" />
        <link type="text/css" rel="stylesheet" media="screen" href="converse.min.css" />
    </head>
    <body class="converse-fullscreen">
        <noscript>You need to enable JavaScript to run the chat app.</noscript>
        <div id="conversejs-bg"></div>
        <script>
            window.addEventListener('converse-loaded', () => {
                converse.plugins.add('converse-debug', {
                    initialize() {
                        const { _converse } = this;
                        window._converse = _converse;
                    },
                });
                converse.initialize({
                    discover_connection_methods: false,
                    ping_interval: 15,
                    reuse_scram_keys: true,
                    // muc_subscribe_to_rai: true,
                    theme: 'dracula',
                    show_send_button: true,
                    auto_away: 300,
                    message_limit: 300,
                    // singleton: true,
                    // auto_join_rooms: ['ttt@conference.chat.example.org'],
                    auto_register_muc_nickname: true,
                    loglevel: 'debug',
                    // modtools_disable_assign: ['owner', 'moderator', 'participant', 'visitor'],
                    // modtools_disable_query: ['moderator', 'participant', 'visitor'],
                    // enable_smacks: true,
                    // connection_options: { 'worker': '/dist/shared-connection-worker.js' },
                    // persistent_store: 'IndexedDB',
                    message_archiving: 'always',
                    // muc_domain: 'conference.chat.example.org',
                    muc_respect_autojoin: true,
                    view_mode: 'fullscreen',
                    websocket_url: '{{XMPP_SERVER}}',
                    allow_user_defined_connection_url: false,
                    muc_show_logs_before_join: true,
                    whitelisted_plugins: ['converse-debug', 'converse-batched-probe'],
                    blacklisted_plugins: [],
                });
            });
        </script>
        <script src="converse.min.js"></script>
    </body>
</html>
